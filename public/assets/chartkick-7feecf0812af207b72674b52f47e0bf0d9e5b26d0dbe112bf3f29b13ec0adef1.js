!function(m){"use strict";function i(t){return"[object Array]"===Object.prototype.toString.call(t)}function o(t){return t instanceof Function}function a(t){return!o(t)&&t instanceof Object}function r(t,e){var n;for(n in e)a(e[n])||i(e[n])?(a(e[n])&&!a(t[n])&&(t[n]={}),i(e[n])&&!i(t[n])&&(t[n]=[]),r(t[n],e[n])):e[n]!==undefined&&(t[n]=e[n])}function I(t,e){var n={};return r(n,t),r(n,e),n}function s(t){var e,n,a,i,r,o,s,c,l,d,u;return"[object Date]"===(d=Object.prototype.toString.call(t))?t:"[object String]"===d&&(a=t.match(V))?(u=parseInt(a[1],10),o=parseInt(a[3],10)-1,e=parseInt(a[5],10),n=parseInt(a[7],10),r=a[9]?parseInt(a[9],10):0,l=a[11]?parseInt(a[11],10):0,i=a[12]?1e3*parseFloat(G+a[12].slice(1)):0,c=Date.UTC(u,o,e,n,r,l,i),a[13]&&a[14]&&(s=60*a[15],a[17]&&(s+=parseInt(a[17],10)),c-=60*(s*="-"===a[14]?-1:1)*1e3),new Date(c)):void 0}function u(t){var e,n,a;for(e=0;e<t.length;e++)for(a=t[e].data,n=0;n<a.length;n++)if(a[n][1]<0)return!0;return!1}function g(i,r,o,s,c,l,d){return function(t,e,n){var a=I({},i);return a=I(a,n||{}),e.hideLegend&&r(a),"min"in e?o(a,e.min):u(t)||o(a,0),e.max&&s(a,e.max),"stacked"in e&&c(a,e.stacked),e.colors&&(a.colors=e.colors),e.xtitle&&l(a,e.xtitle),e.ytitle&&d(a,e.ytitle),a=I(a,e.library||{})}}function n(t,e){document.body.innerText?t.innerText=e:t.textContent=e}function c(t,e){n(t,"Error Loading Chart: "+e),t.style.color="#ff0000"}function t(i,t,e){(m.jQuery||m.Zepto||m.$).ajax({dataType:"json",url:t,success:e,error:function(t,e,n){var a="string"==typeof n?n:n.message;c(i,a)}})}function l(t,e){try{e(t)}catch(n){throw c(t.element,n.message),n}}function d(e,n){"string"==typeof e.dataSource?t(e.element,e.dataSource,function(t){e.data=t,l(e,n)}):(e.data=e.dataSource,l(e,n))}function f(t){return""+t}function O(t){return parseFloat(t)}function h(t){var e,n,a,i;if("object"!=typeof t)if("number"==typeof t)t=new Date(1e3*t);else{if(R.smarterDates&&(e=t.match(U)))return n=parseInt(e[1],10),a=parseInt(e[3],10)-1,i=parseInt(e[5],10),new Date(n,a,i);t=s(t.replace(/ /,"T").replace(" ","").replace("UTC","Z"))||new Date(t)}return t}function p(t){if(!i(t)){var e,n=[];for(e in t)t.hasOwnProperty(e)&&n.push([e,t[e]]);t=n}return t}function v(t,e){return t[0].getTime()-e[0].getTime()}function j(t,e){return t-e}function C(){if(!t&&"Highcharts"in m){var t=new function(){var u=m.Highcharts;this.name="highcharts";var a={chart:{},xAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},yAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},title:{text:null},credits:{enabled:!1},legend:{borderWidth:0},tooltip:{style:{fontSize:"12px"}},plotOptions:{areaspline:{},series:{marker:{}}}},h=g(a,function(t){t.legend.enabled=!1},function(t,e){t.yAxis.min=e},function(t,e){t.yAxis.max=e},function(t,e){t.plotOptions.series.stacking=e?"normal":null},function(t,e){t.xAxis.title.text=e},function(t,e){t.yAxis.title.text=e});this.renderLineChart=function(t,e){var n={};"areaspline"===(e=e||"spline")&&(n={plotOptions:{areaspline:{stacking:"normal"},series:{marker:{enabled:!1}}}});var a,i,r,o=h(t.data,t.options,n);o.xAxis.type=t.options.discrete?"category":"datetime",o.chart.type=e,o.chart.renderTo=t.element.id;var s=t.data;for(i=0;i<s.length;i++){if(a=s[i].data,!t.options.discrete)for(r=0;r<a.length;r++)a[r][0]=a[r][0].getTime();s[i].marker={symbol:"circle"}}o.series=s,new u.Chart(o)},this.renderScatterChart=function(t){var e={},n=h(t.data,t.options,e);n.chart.type="scatter",n.chart.renderTo=t.element.id,n.series=t.data,new u.Chart(n)},this.renderPieChart=function(t){var e={};t.options.colors&&(e.colors=t.options.colors);var n=I(I(a,e),t.options.library||{});n.chart.renderTo=t.element.id,n.series=[{type:"pie",name:t.options.label||"Value",data:t.data}],new u.Chart(n)},this.renderColumnChart=function(t,e){e=e||"column";var n,a,i,r,o=t.data,s=h(o,t.options),c=[];for(s.chart.type=e,s.chart.renderTo=t.element.id,n=0;n<o.length;n++)for(i=o[n],a=0;a<i.data.length;a++)c[(r=i.data[a])[0]]||(c[r[0]]=new Array(o.length)),c[r[0]][n]=r[1];var l=[];for(n in c)c.hasOwnProperty(n)&&l.push(n);s.xAxis.categories=l;var d=[];for(n=0;n<o.length;n++){for(r=[],a=0;a<l.length;a++)r.push(c[l[a]][n]||0);d.push({name:o[n].name,data:r})}s.series=d,new u.Chart(s)};var e=this;this.renderBarChart=function(t){e.renderColumnChart(t,"bar")},this.renderAreaChart=function(t){e.renderLineChart(t,"areaspline")}};$.push(t)}if(!e&&m.google&&m.google.setOnLoadCallback){var e=new function(){var h=m.google;this.name="google";var a={},i=[],r=function(){for(var t,e=0;e<i.length;e++)t=i[e],h.visualization&&("corechart"===t.pack&&h.visualization.LineChart||"timeline"===t.pack&&h.visualization.Timeline)&&(t.callback(),i.splice(e,1),e--)},t=function(t,e){if(e||(e=t,t="corechart"),i.push({pack:t,callback:e}),a[t])r();else{a[t]=!0;var n={packages:[t],callback:r};R.language&&(n.language=R.language),h.load("visualization","1",n)}},o={chartArea:{},fontName:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif",pointSize:6,legend:{textStyle:{fontSize:12,color:"#444"},alignment:"center",position:"right"},curveType:"function",hAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},gridlines:{color:"transparent"},baselineColor:"#ccc",viewWindow:{}},vAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},baselineColor:"#ccc",viewWindow:{}},tooltip:{textStyle:{color:"#666",fontSize:12}}},s=function(t){t.legend.position="none"},c=function(t,e){t.hAxis.viewWindow.min=e},l=function(t,e){t.hAxis.viewWindow.max=e},d=function(t,e){t.isStacked=!!e},u=g(o,s,function(t,e){t.vAxis.viewWindow.min=e},function(t,e){t.vAxis.viewWindow.max=e},d,function(t,e){t.hAxis.title=e,t.hAxis.titleTextStyle.italic=!1},function(t,e){t.vAxis.title=e,t.vAxis.titleTextStyle.italic=!1}),f=function(t,e){var n,a,i,r,o,s=[];for(n=0;n<t.length;n++)for(i=t[n],a=0;a<i.data.length;a++)r=i.data[a],s[o="datetime"===e?r[0].getTime():r[0]]||(s[o]=new Array(t.length)),s[o][n]=O(r[1]);var c,l=[],d=!0;for(n in s)s.hasOwnProperty(n)&&("datetime"===e?(c=new Date(O(n)),d=d&&W(c)):c="number"===e?O(n):n,l.push([c].concat(s[n])));"datetime"===e&&l.sort(v);var u=new h.visualization.DataTable;for(e="datetime"===e&&d?"date":e,u.addColumn(e,""),n=0;n<t.length;n++)u.addColumn("number",t[n].name);return u.addRows(l),u},p=function(t){m.attachEvent?m.attachEvent("onresize",t):m.addEventListener&&m.addEventListener("resize",t,!0),t()};this.renderLineChart=function(n){t(function(){var t=u(n.data,n.options),e=f(n.data,n.options.discrete?"string":"datetime");n.chart=new h.visualization.LineChart(n.element),p(function(){n.chart.draw(e,t)})})},this.renderPieChart=function(a){t(function(){var t={chartArea:{top:"10%",height:"80%"}};a.options.colors&&(t.colors=a.options.colors);var e=I(I(o,t),a.options.library||{}),n=new h.visualization.DataTable;n.addColumn("string",""),n.addColumn("number","Value"),n.addRows(a.data),a.chart=new h.visualization.PieChart(a.element),p(function(){a.chart.draw(n,e)})})},this.renderColumnChart=function(n){t(function(){var t=u(n.data,n.options),e=f(n.data,"string");n.chart=new h.visualization.ColumnChart(n.element),p(function(){n.chart.draw(e,t)})})},this.renderBarChart=function(a){t(function(){var t={hAxis:{gridlines:{color:"#ccc"}}},e=g(o,s,c,l,d)(a.data,a.options,t),n=f(a.data,"string");a.chart=new h.visualization.BarChart(a.element),p(function(){a.chart.draw(n,e)})})},this.renderAreaChart=function(a){t(function(){var t={isStacked:!0,pointSize:0,areaOpacity:.5},e=u(a.data,a.options,t),n=f(a.data,a.options.discrete?"string":"datetime");a.chart=new h.visualization.AreaChart(a.element),p(function(){a.chart.draw(n,e)})})},this.renderGeoChart=function(a){t(function(){var t={legend:"none",colorAxis:{colors:a.options.colors||["#f6c7b6","#ce502d"]}},e=I(I(o,t),a.options.library||{}),n=new h.visualization.DataTable;n.addColumn("string",""),n.addColumn("number",a.options.label||"Value"),n.addRows(a.data),a.chart=new h.visualization.GeoChart(a.element),p(function(){a.chart.draw(n,e)})})},this.renderScatterChart=function(a){t(function(){var t={},e=u(a.data,a.options,t),n=f(a.data,"number");a.chart=new h.visualization.ScatterChart(a.element),p(function(){a.chart.draw(n,e)})})},this.renderTimeline=function(a){t("timeline",function(){var t={legend:"none"};a.options.colors&&(t.colors=a.options.colors);var e=I(I(o,t),a.options.library||{}),n=new h.visualization.DataTable;n.addColumn({type:"string",id:"Name"}),n.addColumn({type:"date",id:"Start"}),n.addColumn({type:"date",id:"End"}),n.addRows(a.data),a.element.style.lineHeight="normal",a.chart=new h.visualization.Timeline(a.element),p(function(){a.chart.draw(n,e)})})}};$.push(e)}if(!n&&"Chart"in m){var n=new function(){var r=m.Chart;this.name="chartjs";var s={maintainAspectRatio:!1,animation:!1},B=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#3B3EAC"],t=function(t){t.legend.display=!1},e=function(t,e){null!==e&&(t.scales.yAxes[0].ticks.min=e)},n=function(t,e){t.scales.yAxes[0].ticks.max=e},a=function(t,e){t.scales.xAxes[0].stacked=!!e,t.scales.yAxes[0].stacked=!!e},i=function(t,e){t.scales.xAxes[0].scaleLabel.display=!0,t.scales.xAxes[0].scaleLabel.labelString=e},o=function(t,e){t.scales.yAxes[0].scaleLabel.display=!0,t.scales.yAxes[0].scaleLabel.labelString=e},c=function(t,e,n,a){t.element.innerHTML="<canvas></canvas>";var i=t.element.getElementsByTagName("CANVAS")[0];t.chart=new r(i,{type:e,data:n,options:a})},E=function(t,e){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?"rgba("+parseInt(n[1],16)+", "+parseInt(n[2],16)+", "+parseInt(n[3],16)+", "+e+")":t},l=function(t,e,n){var a=Math.ceil(t.element.offsetWidth/4/e.labels.length);n.scales.xAxes[0].ticks.callback=function(t){return(t=f(t)).length>a?t.substring(0,a-2)+"...":t}},d=g(I(s,{scales:{yAxes:[{ticks:{maxTicksLimit:4},scaleLabel:{fontSize:16,fontColor:"#333"}}],xAxes:[{gridLines:{drawOnChartArea:!1},scaleLabel:{fontSize:16,fontColor:"#333"},time:{},ticks:{}}]},legend:{}}),t,e,n,a,i,o),u=function(t,e,n){var a,i,r,o=[],s=[],c=t.options.colors||B,l=!0,d=!0,u=!0,h=!0,f=("line"===n||"area"===n)&&!t.options.discrete,p=t.data,m=[],g=[];for(b=0;b<p.length;b++)for(A=p[b],C=0;C<A.data.length;C++)i=A.data[C],g[r=f?i[0].getTime():i[0]]||(g[r]=new Array(p.length)),g[r][b]=O(i[1]),-1===m.indexOf(r)&&m.push(r);f&&m.sort(j);for(var v=[],C=0;C<p.length;C++)v.push([]);var x,y;l=!0;for(y=0;y<m.length;y++){b=m[y],f?(x=new Date(O(b)),l=l&&W(x),a||(a=x.getDay()),d=d&&P(x,a),u=u&&F(x),h=h&&M(x)):x=b,s.push(x);for(C=0;C<p.length;C++)v[C].push(g[b][C])}for(var b=0;b<p.length;b++){var A=p[b],w="line"!==n?E(c[b],.5):c[b],S={label:A.name,data:v[b],fill:"area"===n,borderColor:c[b],backgroundColor:w,pointBackgroundColor:c[b],borderWidth:2};o.push(I(S,A.library||{}))}if(f&&0<s.length){var T=s[0].getTime(),k=s[0].getTime();for(b=1;b<s.length;b++)(x=s[b].getTime())<T&&(T=x),k<x&&(k=x);var z,L=(k-T)/864e5;if(!e.scales.xAxes[0].time.unit)if(h||3650<L?(e.scales.xAxes[0].time.unit="year",z=365):u||300<L?(e.scales.xAxes[0].time.unit="month",z=30):(l||10<L)&&(e.scales.xAxes[0].time.unit="day",z=1),z&&0<L){var D=Math.ceil(L/z/(t.element.offsetWidth/100));d&&(D=7*Math.ceil(D/7)),e.scales.xAxes[0].time.unitStepSize=D}!e.scales.xAxes[0].time.tooltipFormat&&l&&(e.scales.xAxes[0].time.tooltipFormat="ll")}return{labels:s,datasets:o}};this.renderLineChart=function(t,e){var n={},a=d(t.data,I(n,t.options)),i=u(t,a,e||"line");a.scales.xAxes[0].type=t.options.discrete?"category":"time",c(t,"line",i,a)},this.renderPieChart=function(t){for(var e=I(s,t.options.library||{}),n=[],a=[],i=0;i<t.data.length;i++){var r=t.data[i];n.push(r[0]),a.push(r[1])}var o={labels:n,datasets:[{data:a,backgroundColor:t.options.colors||B}]};c(t,"pie",o,e)},this.renderColumnChart=function(t,e){var n=d(t.data,t.options),a=u(t,n,"column");l(t,a,n),c(t,"bar"===e?"horizontalBar":"bar",a,n)};var h=this;this.renderAreaChart=function(t){h.renderLineChart(t,"area")},this.renderBarChart=function(t){h.renderColumnChart(t,"bar")}};$.push(n)}}function e(t,e){var n,a,i,r;for(i="render"+t,r=e.options.adapter,0==$.length&&C(),n=0;n<$.length;n++)if(a=$[n],(!r||r===a.name)&&o(a[i]))return a[i](e);throw new Error("No adapter found")}function W(t){return t.getMilliseconds()+t.getSeconds()+t.getMinutes()+t.getHours()===0}function P(t,e){return W(t)&&t.getDay()===e}function F(t){return W(t)&&1===t.getDate()}function M(t){return F(t)&&0===t.getMonth()}function x(t){return!isNaN(h(t))&&6<=f(t).length}function y(t){var e,n,a;for(e=0;e<t.length;e++)for(a=p(t[e].data),n=0;n<a.length;n++)if(!x(a[n][0]))return!0;return!1}function b(t,e,n){var a;for(!i(t)||"object"!=typeof t[0]||i(t[0])?(t=[{name:e.label||"Value",data:t}],e.hideLegend=!0):e.hideLegend=!1,!R.smarterDiscrete||null!==e.discrete&&e.discrete!==undefined||(e.discrete=y(t)),e.discrete&&(n="string"),a=0;a<t.length;a++)t[a].data=Q(p(t[a].data),n);return t}function A(t){var e,n=p(t);for(e=0;e<n.length;e++)n[e]=[f(n[e][0]),O(n[e][1])];return n}function w(t){var e;for(e=0;e<t.length;e++)t[e][1]=h(t[e][1]),t[e][2]=h(t[e][2]);return t}function S(t){t.data=b(t.data,t.options,"datetime"),e("LineChart",t)}function T(t){t.data=b(t.data,t.options,"string"),e("ColumnChart",t)}function k(t){t.data=A(t.data),e("PieChart",t)}function z(t){t.data=b(t.data,t.options,"string"),e("BarChart",t)}function L(t){t.data=b(t.data,t.options,"datetime"),e("AreaChart",t)}function D(t){t.data=A(t.data),e("GeoChart",t)}function B(t){t.data=b(t.data,t.options,"number"),e("ScatterChart",t)}function E(t){t.data=w(t.data),e("Timeline",t)}function N(t,e,n,a,i){"string"==typeof e&&(e=document.getElementById(e)),t.element=e,t.options=a||{},t.dataSource=n,d(H.charts[e.id]=t,i)}var H,V,G,R=m.Chartkick||{},$=[],U=/^(\d\d\d\d)(\-)?(\d\d)(\-)?(\d\d)$/i;$=[];V=/(\d\d\d\d)(\-)?(\d\d)(\-)?(\d\d)(T)?(\d\d)(:)?(\d\d)?(:)?(\d\d)?([\.,]\d+)?($|Z|([\+\-])(\d\d)(:)?(\d\d)?)/i,G=String(1.5).charAt(1);var Z=function(t,e){return t="number"===e?O(t):"datetime"===e?h(t):f(t)},Q=function(t,e){var n,a,i=[];for(a=0;a<t.length;a++)n=Z(t[a][0],e),i.push([n,O(t[a][1])]);return"datetime"===e&&i.sort(v),i};H={LineChart:function(t,e,n){N(this,t,e,n,S)},PieChart:function(t,e,n){N(this,t,e,n,k)},ColumnChart:function(t,e,n){N(this,t,e,n,T)},BarChart:function(t,e,n){N(this,t,e,n,z)},AreaChart:function(t,e,n){N(this,t,e,n,L)},GeoChart:function(t,e,n){N(this,t,e,n,D)},ScatterChart:function(t,e,n){N(this,t,e,n,B)},Timeline:function(t,e,n){N(this,t,e,n,E)},charts:{}},m.Chartkick=H}(window);